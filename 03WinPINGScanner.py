import subprocess
import socket as sk

#IP INTERNA
s = sk.socket(sk.AF_INET, sk.SOCK_DGRAM)
s.connect(("8.8.8.8", 80))
ip = s.getsockname()[0].split('.')
s.close()


#RANGO DE IP'S (192.168.X.1-255)
ips = []
ips_on = []

for i in range(1,256):
	ip_full = str(ip[0]+'.'+ip[1]+'.'+ip[2]+'.'+str(i))
	ips.append(ip_full)

#ESCANEO DEL RANGO DE IP'S
for ip in ips:
	print 'Scanning ',ip
	output = subprocess.Popen(["ping", "-n ", "1", ip],stdout = subprocess.PIPE).communicate()[0]
	print output
	if ('inaccesible' in output):
		print("Offline")
	else:
		ips_on.append(ip)
		
print ips_on
